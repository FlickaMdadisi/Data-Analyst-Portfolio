---
title: "Tidy Data - Pivot Wider"
author: "Mahelet Gennene"
date: '2023-05-01'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

# attach package
  library(tidyverse)

# load dataset (built-into R) and set as data frame
  Titanic = as.data.frame(Titanic) 
```

## Tidy data - pivot wider to organize data for analysis with variables as columns

This code reshapes the `Titanic` data into a wider data frame. The `Pivot_wider()` function from `tidyr`uses arguments `names_from` to specify which variables should be used as column names and `values_from` for variables that contain the values. Because `pivot_wider` creates unique combinations of all columns not included in the arguments, it generates an output with NAs for each combination. This code identifies unique observations by using the `distinct()` function. The result is a restructured and tidy data that simplifies comparing columns. 

```{r Titanic, echo=TRUE}

  class = Titanic %>% 
    distinct() %>%
    pivot_wider(
              names_from = Class,    # name of col containing the names
              values_from = Freq) %>%  # name of col containing the values
   select(3, First = 4, Second = 5, Third = 6, 7) %>%   # rename & filter cols
   unnest(cols = everything()) %>% # removes duplicate rows if needed
   print()
```

